const contactModal=document.querySelector(".modal-contact"),contactForm=contactModal.querySelector(".contact-form"),allInputs=Array.from(contactForm.querySelectorAll("[name]")),fieldName=contactForm.querySelector("#name"),fieldMail=contactForm.querySelector("#email"),fieldMessage=contactForm.querySelector("#message"),openContactModalBtn=document.querySelector(".btn--contacts");let storageSupport=!0,nameFromStorage="",mailFromStorage="";try{nameFromStorage=localStorage.getItem("name"),mailFromStorage=localStorage.getItem("email")}catch(e){storageSupport=!1}const setValuesFromLocalStorage=()=>{nameFromStorage&&(fieldName.value=nameFromStorage),mailFromStorage&&(fieldMail.value=mailFromStorage)},setFocus=()=>{const e=allInputs.find(e=>!e.value);e?e.focus():fieldMessage.focus()},handleSubmit=e=>{fieldName.value&&fieldMail.value&&fieldMessage.value?(localStorage.setItem("name",fieldName.value),localStorage.setItem("email",fieldMail.value)):(e.preventDefault(),removeErrorClass(contactModal),contactModal.offsetWidth,addErrorClass(contactModal))},addErrorClass=e=>{e.classList.add("modal--error"),setFocus()},removeErrorClass=e=>{e.classList.remove("modal--error")};openContactModalBtn.addEventListener("click",e=>{e.preventDefault(),showModal(contactModal),nameFromStorage&&(fieldName.value=nameFromStorage),mailFromStorage&&(fieldMail.value=mailFromStorage),setFocus()}),contactForm.addEventListener("submit",handleSubmit);
